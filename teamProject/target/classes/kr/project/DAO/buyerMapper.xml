<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.project.DAO.BuyerDAO">

<insert id="buyerInsert" parameterType="buyerVO">
	insert into buyer values (buyer_idx.nextval, #{id}, 
	#{pw}, #{name}, #{nickname}, #{gender}, #{age}, #{email}, #{carrier},
	#{phonenum}, #{creditCard}, #{cardNum}, #{area}, #{address}, #{money})
</insert>

<select id="buyerLogin" parameterType="java.util.HashMap" resultType="int">
	select count(*) from buyer where id = #{id} and pw = #{pw}
</select>

<select id="CheckID" parameterType="String" resultType="int">
	select count(*) from buyer where id = #{id}
</select>

<select id="CheckNickname" parameterType="String" resultType="int">
	select count(*) from buyer where nickname = #{nickname}
</select>


<select id="sellectCount" parameterType="java.util.HashMap" resultType="int">
	select count(*) from sellgds where category = #{category}
	and #{area} in (select area from seller)
</select>

<select id="selectList" resultType="sellerGdsVO" parameterType="java.util.HashMap">
	<![CDATA[
	select idx, name, price, origin, image_name, category from 
	(SELECT ROWNUM rn, tt.* FROM (SELECT * FROM sellgds order by idx desc) 
	TT where category = #{category} and #{area} in (select area from seller)) 
	where rn >= #{startNo} AND rn <= #{endNo}
	]]>
</select>

<select id ="buyerInfo" parameterType="String" resultType="buyerVO">
 select * from buyer where id = #{id}
</select>

<delete id ="buyerInfoDelete" parameterType="String">
 delete from buyer where id = #{id}
</delete>

<update id="changePW" parameterType="java.util.HashMap">
 update buyer set pw = #{pw} where id = #{id}
</update>

<update id="updateInfo" parameterType="buyerVO">
 update buyer set name= #{name}, nickname=#{nickname}, 
 age=#{age}, email=#{email},carrier=#{carrier}, 
 phonenum=#{phonenum}, area=#{area}, address=#{address}, 
 creditcard=#{creditcard}, cardNum=#{cardNum} where id = #{id}
</update>

<update id="moneyadd" parameterType="java.util.HashMap">
 update buyer set money=#{money} where id = #{id}
</update> 
</mapper>